import { useState } from 'react';
import NodeGraph from '../components/NodeGraph';
import Head from 'next/head'
import styles from '@/styles/Graph.module.css'
import Navbar from '../components/Navbar';
import Button from '../components/Button';
import JournalModal from '../components/JournalModal';

type Node = {
  id: number;
  label: string;
  journalHeader: string;
  journalBody: string;
};

type Edge = {
  from: number;
  to: number;
};

const HomePage = () => {
  const [selectedNode, setSelectedNode] = useState<Node | null>(null);

  const handleNodeDoubleClick = (nodeId: number) => {
    const node = nodes.find((n) => n.id === nodeId);
    if (node) {
      setSelectedNode(node);
    }
  };

  const handleCloseModal = () => {
    setSelectedNode(null);
  };

  const nodes: Node[] = [
    { id: 1, label: 'User', journalHeader: 'Journal Entry 1', journalBody: 'This is the body of journal entry 1.' },
    { id: 2, label: 'People', journalHeader: 'Journal Entry 2', journalBody: 'This is the body of journal entry 2.' },
    { id: 3, label: 'Ike', journalHeader: 'Journal Entry 3', journalBody: 'This is the body of journal entry 3.' },
    { id: 4, label: 'Tarun', journalHeader: 'Journal Entry 4', journalBody: 'This is the body of journal entry 4.' },
    { id: 5, label: 'Food', journalHeader: 'Journal Entry 5', journalBody: 'This is the body of journal entry 5.' },
    { id: 6, label: 'Pizza', journalHeader: 'Journal Entry 6', journalBody: 'This is the body of journal entry 6.' },
  ];

  const edges: Edge[] = [
    { from: 1, to: 2 },
    { from: 1, to: 5 },
    { from: 2, to: 3 },
    { from: 2, to: 4 },
    { from: 5, to: 6 },
  ];

  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className={styles.main}>
        <Navbar />
        <h1 className={styles.h1}>Choose a view:</h1>
        <Button />
        <NodeGraph nodes={nodes} edges={edges} onNodeDoubleClick={handleNodeDoubleClick} />
        {selectedNode && <JournalModal header={selectedNode.journalHeader} body={selectedNode.journalBody} onClose={handleCloseModal} />}
      </main>
    </>
  );
};

export default HomePage;
